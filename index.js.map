{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// src/pixabay-api.js\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '52755140-7ddce3cbb2c82e84a1ea5fb45'; \nconst PER_PAGE = 15; \n\n/**\n * –í–∏–∫–æ–Ω—É—î –∑–∞–ø–∏—Ç –¥–æ Pixabay —ñ –ø–æ–≤–µ—Ä—Ç–∞—î response.data\n * @param {string} query  \n * @param {number} page \n * @returns {Promise<Object>} \n */\nexport async function getImagesByQuery(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: PER_PAGE,\n    page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º data (—Å–æ–¥–µ—Ä–∂–∏—Ç total, totalHits, hits)\n    return response.data;\n  } catch (error) {\n    // –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –¥–∞–ª—å—à–µ ‚Äî main.js –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó\n    throw error;\n  }\n}\n\nexport { PER_PAGE };\n","// src/render-functions.js\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// —Å–µ–ª–µ–∫—Ç–æ—Ä—ã DOM (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–µ –≤—Å–µ ‚Äî —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ)\nconst galleryEl = document.getElementById('gallery');\nconst loaderEl = document.getElementById('loader');\nconst loadMoreBtn = document.getElementById('load-more-btn');\n\n// —Å–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä SimpleLightbox –¥–ª—è —Å—Å—ã–ª–æ–∫ –≤–Ω—É—Ç—Ä–∏ .gallery\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n/**\n * –°–æ–∑–¥–∞—ë—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ DOM —Ä–∞–∑–º–µ—Ç–∫—É –≥–∞–ª–µ—Ä–µ–∏.\n * –í–∞–∂–Ω–æ: –¥–æ–±–∞–≤–ª—è–µ—Ç –í–°–Æ –Ω–æ–≤—É—é —Ä–∞–∑–º–µ—Ç–∫—É –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π.\n * @param {Array} images - –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ Pixabay (hits)\n */\nexport function createGallery(images) {\n  if (!Array.isArray(images) || images.length === 0) return;\n\n  const markup = images\n    .map(\n      (img) => `\n    <div class=\"photo-card\">\n      <a class=\"photo-link\" href=\"${img.largeImageURL}\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <div class=\"stats\">\n          <span title=\"Likes\">‚ù§ ${img.likes}</span>\n          <span title=\"Views\">üëÅ ${img.views}</span>\n          <span title=\"Comments\">üí¨ ${img.comments}</span>\n          <span title=\"Downloads\">‚¨á ${img.downloads}</span>\n        </div>\n      </div>\n    </div>\n  `,\n    )\n    .join('');\n\n  // –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –≤—Å—Ç–∞–≤–∫–∏\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  // –æ–±–Ω–æ–≤–∏—Ç—å SimpleLightbox (–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º .gallery a)\n  lightbox.refresh();\n}\n\n/** –û—á–∏—â–∞–µ—Ç –≥–∞–ª–µ—Ä–µ—é –ø–æ–ª–Ω–æ—Å—Ç—å—é */\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n  // refresh —á—Ç–æ–±—ã SimpleLightbox \"–∑–∞–±—ã–ª\" —Å—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏\n  lightbox.refresh();\n}\n\n/** –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–∞–¥–µ—Ä (–¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å) */\nexport function showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\n\n/** –°–∫—Ä—ã—Ç—å –ª–æ–∞–¥–µ—Ä */\nexport function hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\n\n/** –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É Load more */\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\n/** –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É Load more */\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\n// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∏ lightbox (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≥–¥–µ-—Ç–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è)\nexport { galleryEl, loadMoreBtn, lightbox };\n","// src/main.js\nimport './css/styles.css';\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  galleryEl,\n  loadMoreBtn,\n} from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n/* –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–ø–æ –¢–ó: —Ö—Ä–∞–Ω–∏—Ç—å –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ) */\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nlet isLoading = false;\n\n/* DOM */\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\n\n/* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É */\nhideLoadMoreButton();\n\n/* –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã */\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.warning({ title: 'Warning', message: '–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ.' });\n    return;\n  }\n\n  // –ï—Å–ª–∏ –Ω–æ–≤—ã–π –ø–æ–∏—Å–∫ ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n  if (query !== currentQuery) {\n    currentQuery = query;\n    currentPage = 1;\n    totalHits = 0;\n    clearGallery();\n    hideLoadMoreButton();\n  }\n\n  await fetchAndRenderImages({ isNewSearch: query !== currentQuery ? true : false });\n});\n\n/* –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ Load more */\nloadMoreBtn.addEventListener('click', async () => {\n  if (!currentQuery) return;\n  await fetchAndRenderImages();\n});\n\n/**\n * –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.\n * @param {Object} options\n * @param {boolean} options.isNewSearch - —Ñ–ª–∞–≥ –Ω–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–µ—Å–ª–∏ true, page —Å–±—Ä–æ—à–µ–Ω –≤ 1)\n */\nasync function fetchAndRenderImages({ isNewSearch = false } = {}) {\n  if (isLoading) return;\n  isLoading = true;\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    // –ø—Ä–∏ –æ–±—ã—á–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ currentPage —É–∂–µ –∞–∫—Ç—É–∞–ª–µ–Ω; –µ—Å–ª–∏ –Ω–æ–≤—ã–π –ø–æ–∏—Å–∫ ‚Äî —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ 1\n    if (isNewSearch) currentPage = 1;\n\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    // data: { total, totalHits, hits: [...] }\n    totalHits = data.totalHits ?? 0;\n    const hits = Array.isArray(data.hits) ? data.hits : [];\n\n    if (hits.length === 0) {\n      // –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É\n      iziToast.info({\n        title: 'Info',\n        message: 'No images found. Try another query.',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    // –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ç–∫—É (–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π –≤ createGallery)\n    createGallery(hits);\n\n    // –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π –Ω–∞–±–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Äî —É–≤–µ–¥–æ–º–ª—è–µ–º –æ–± –æ–±—â–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ\n    if (currentPage === 1) {\n      iziToast.success({\n        title: 'Success',\n        message: `Hooray! We found ${totalHits} images.`,\n      });\n    }\n\n    // –†–µ—à–∞–µ–º –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ Load more:\n    const shownSoFar = currentPage * PER_PAGE;\n    if (shownSoFar >= totalHits) {\n      // –∫–æ–Ω–µ—Ü –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –∏ –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ)\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n\n    // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è ‚Äî —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º page –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞\n    currentPage += 1;\n\n    // –ï—Å–ª–∏ –º—ã –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–Ω–µ –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å), –¥–µ–ª–∞–µ–º –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª\n    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø–æ –≤—ã—Å–æ—Ç–µ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ √ó2\n    if (currentPage > 2) {\n      // —Å—Ç–∞–≤–∏–º setTimeout, —á—Ç–æ–±—ã DOM —É—Å–ø–µ–ª –≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –±—ã–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã\n      await new Promise((res) => setTimeout(res, 200));\n      smoothScrollByCardHeight();\n    }\n  } catch (error) {\n    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏ / API\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: error?.message || 'An error occurred while fetching images.',\n    });\n  } finally {\n    hideLoader();\n    isLoading = false;\n  }\n}\n\n/** –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –Ω–∞ –¥–≤–µ –≤—ã—Å–æ—Ç—ã –∫–∞—Ä—Ç–æ—á–∫–∏ */\nfunction smoothScrollByCardHeight() {\n  const firstCard = galleryEl.querySelector('.photo-card');\n  if (!firstCard) return;\n  const { height } = firstCard.getBoundingClientRect();\n  // –ø–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –Ω–∞ 2 –≤—ã—Å–æ—Ç—ã –∫–∞—Ä—Ç–æ—á–∫–∏\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\n/* –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî —Ñ–æ–∫—É—Å –≤ input */\ninput.focus();\n"],"names":["BASE_URL","API_KEY","PER_PAGE","getImagesByQuery","query","page","params","axios","error","galleryEl","loaderEl","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","currentQuery","currentPage","totalHits","isLoading","form","input","e","iziToast","fetchAndRenderImages","isNewSearch","data","hits","res","smoothScrollByCardHeight","firstCard","height"],"mappings":"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"}